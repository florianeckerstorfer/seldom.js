<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Seldom.js</title>
    <script src="node_modules/domlight.js/dist/domlight.js"></script>
    <script src="build/seldom.js"></script>
    <link rel="stylesheet" href="build/seldom.css">
</head>
<body>
<aside>
    <button id="select-btn">Select</button>
    <button id="refine-btn">Refine</button>
    <span id="selection"></span>
</aside>
<section id="demo">
    <div id="box1" class="box">
        <h2>Godfellas</h2>
        <div id="example1"><div><div><p>Daylight and everything. Oh, I always feared he might run off like this. Why, why, <em>why didn't I break his legs?</em> I guess because my parents keep telling me to be more ladylike. As though! And so we say goodbye to our beloved pet, Nibbler, who's gone to a place where I, too, hope one day to go. The toilet. File not found. <strong>Fry!</strong> Quit doing the right thing, you jerk! No. We're on the top. No, just a regular mistake.</p></div></div></div>
        <div id="example2">
            <p>No, I'm Santa Claus! I am the man with no name, Zapp Brannigan! I'm sure those windmills will keep them cool. And until then, I can never die? Ok, we'll go deliver this crate like professionals, and then we'll go ride the bumper cars. Would you censor the Venus de Venus just because you can see her spewers?</p>
            <p>Hey, whatcha watching? Why would I want to know that? Kids have names? Oh, all right, I am. But if anything happens to me, tell them I died robbing some old man. For one beautiful night I knew what it was like to be a grandmother. Subjugated, yet honored.</p>
        </div>
        <h3>Similar Elements with class names</h3>
        <ul>
            <li class="similar-element item item-1">Item 1</li>
            <li class="similar-element item item-2">Item 2</li>
            <li class="similar-element item item-3">Item 3</li>
            <li class="similar-element item item-4">Item 4</li>
            <li class="similar-element item item-5">Item 5</li>
        </ul>
        <h3>Similar Elements with depth</h3>
        <table>
            <tr><td>Row 1 Col A</td><td>Row 1 Col B</td><td>Row 1 Col C</td></tr>
            <tr><td>Row 2 Col A</td><td>Row 2 Col B</td><td>Row 2 Col C</td></tr>
            <tr><td>Row 3 Col A</td><td>Row 3 Col B</td><td>Row 3 Col C</td></tr>
            <tr><td>Row 4 Col A</td><td>Row 4 Col B</td><td>Row 4 Col C</td></tr>
            <tr><td>Row 5 Col A</td><td>Row 5 Col B</td><td>Row 5 Col C</td></tr>
        </table>
    </div>
    <div id="box2" class="box">
        <h2>War Is the H-Word</h2>
        <div id="example3" class="example3 foobar">
            <div><p>I could if you hadn't turned on the light and shut off my stereo. And then the battle's not so bad? WINDMILLS DO NOT WORK THAT WAY! GOOD NIGHT! Okay, I like a challenge. It's a T. It goes "tuh".</p></div>
            <hr>
            <div><p>We'll go deliver this crate like professionals, and then we'll go home. Eeeee!  Now say "nuclear wessels"! She also liked to shut up! Bender, you risked your life to save me! Shinier than yours, meatbag. I haven't felt much of anything since my guinea pig died. Does anybody else feel jealous and aroused and worried?</p></div>
        </div>
        <p>Well, thanks to the Internet, I'm now bored with sex. Is there a place on the web that panders to my lust for violence? We're also Santa Claus! These old Doomsday Devices are dangerously unstable. I'll rest easier not knowing where they are. Hey, guess what you're accessories to. You, minion. Lift my arm. AFTER HIM!</p>
        <p>What are you hacking off? Is it my torso?! 'It is!' My precious torso! It must be wonderful. Look, everyone wants to be like Germany, but do we really have the pure strength of 'will'? What's with you kids? Every other day it's food, food, food. Alright, I'll get you some stupid food. No! I want to live! There are still too many things I don't own! That's a popular name today. Little "e", big "B"? So, how 'bout them Knicks? And until then, I can never die? No. We're on the top.</p>
    </div>
    <div id="box3" class="box">
        <h2>A Taste of Freedom</h2>
        <p>These old Doomsday Devices are dangerously unstable. I'll rest easier not knowing where they are. A true inspiration for the children. Can I use the gun? Quite possible. We live long and are celebrated poopers. It's just like the story of the grasshopper and the octopus. All year long, the grasshopper kept burying acorns for winter, while the octopus mooched off his girlfriend and watched TV. But then the winter came, and the grasshopper died, and the octopus ate all his acorns. Also he got a race car. Is any of this getting through to you? Okay, it's 500 dollars, you have no choice of carrier, the battery can't hold the charge and the reception isn't very… I videotape every customer that comes in here, so that I may blackmail them later.</p>
        <p>Why would I want to know that? I'm sorry, guys. I never meant to hurt you. Just to destroy everything you ever believed in. Hey, tell me something. You've got all this money. How come you always dress like you're doing your laundry? Yeah. Give a little credit to our public schools. Interesting. No, wait, the other thing: tedious. I usually try to keep my sadness pent up inside where it can fester quietly as a mental illness. I suppose I could part with 'one' and still be feared… Why, those are the Grunka-Lunkas! They work here in the Slurm factory.</p>
        <p>Nay, I respect and admire Harold Zoid too much to beat him to death with his own Oscar. I guess if you want children beaten, you have to do it yourself. Tell her she looks thin. I feel like I was mauled by Jesus. When will that be? Meh. Guess again.</p>
    </div>
    <div id="box4" class="box">
        <h2>Xmas Story</h2>
        <p>Five hours? Aw, man! Couldn't you just get me the death penalty? Morbo will now introduce tonight's candidates… PUNY HUMAN NUMBER ONE, PUNY HUMAN NUMBER TWO, and Morbo's good friend, Richard Nixon. Who am I making this out to? I don't 'need' to drink. I can quit anytime I want! You seem malnourished. Are you suffering from intestinal parasites? Oh, you're a dollar naughtier than most.</p>
        <p>We can't compete with Mom! Her company is big and evil! Ours is small and neutral! Tell her you just want to talk. It has nothing to do with mating. Bender, I didn't know you liked cooking. That's so cute. What kind of a father would I be if I said no? Would you censor the Venus de Venus just because you can see her spewers? Now what? No, I'm Santa Claus! You are the last hope of the universe. No! The cat shelter's on to me. Oh sure! Blame the wizards!</p>
        <p>When I was first asked to make a film about my nephew, Hubert Farnsworth, I thought "Why should I?" Then later, Leela made the film. But if I did make it, you can bet there would have been more topless women on motorcycles. Roll film! Oh, you're a dollar naughtier than most. Belligerent and numerous. Look, everyone wants to be like Germany, but do we really have the pure strength of 'will'? I'm sure those windmills will keep them cool. Now Fry, it's been a few years since medical school, so remind me. Disemboweling in your species: fatal or non-fatal? You've killed me! Oh, you've killed me! Humans dating robots is sick. You people wonder why I'm still single? It's 'cause all the fine robot sisters are dating humans! You can crush me but you can't crush my spirit!</p>
    </div>
    <div id="box5" class="box">
        <h2>Roswell That Ends Well</h2>
        <p>Hey, you add a one and two zeros to that or we walk! Guess again. Oh sure! Blame the wizards! But existing is basically all I do! Oh right. I forgot about the battle. Oh, I don't have time for this.  I have to go and buy a single piece of fruit with a coupon and then return it, making people wait behind me while I complain. In your time, yes, but nowadays shut up! Besides, these are adult stemcells, harvested from perfectly healthy adults whom I killed for their stemcells.</p>
        <p>I just told you! You've killed me! Bender! Ship! Stop bickering or I'm going to come back there and change your opinions manually! I had more, but you go ahead. No, I'm Santa Claus! You guys go on without me! I'm going to go… look for more stuff to steal! It's toe-tappingly tragic! Tell her you just want to talk. It has nothing to do with mating. We don't have a brig.</p>
        <p>My fellow Earthicans, as I have explained in my book 'Earth in the Balance'', and the much more popular ''Harry Potter and the Balance of Earth', we need to defend our planet against pollution. Also dark wizards. Fry! Quit doing the right thing, you jerk! We're also Santa Claus! Oh Leela! You're the only person I could turn to; you're the only person who ever loved me. Professor, make a woman out of me.</p>
    </div>
</section>

<script>
    var selection = document.querySelector('#selection');
    var domlight = new Domlight({'borderColor': 'rgb(255,0,0)'});
    var clicklight = new Domlight({'borderColor': 'rgb(0,255,0)'});
    var similarlight = new Domlight({'borderColor': 'rgb(0,0,255)'});
    var seldom = new Seldom(domlight, clicklight, similarlight);
    console.log('example 1', seldom.getDeepestElementWithContent(document.querySelector('#example1')));
    console.log('example 2', seldom.getDeepestElementWithContent(document.querySelector('#example2')));
    var elem3 = document.querySelector('#example3');
    clicklight.highlight(elem3);
    selection.innerHTML = niceElementName(elem3);

    document.querySelector('#select-btn').onclick = select;
    document.querySelector('#refine-btn').onclick = refine;

    function select() {
        seldom.select(document.querySelector('#demo'), function (elem) {
            elem3 = elem;
            selection.innerHTML = niceElementName(elem);
            refine();
        });
    }

    function refine() {
        seldom.refineSelection(elem3, function (elem, similarElements) {
            elem3 = elem;
            selection.innerHTML = niceElementName(elem) + ' + ' + similarElements.map(function (simElem) {
              return niceElementName(simElem);
            }).join(', ');
            console.log('Element', elem);
            console.log('Similar Elements', similarElements);
        });
    }

    function niceElementName(elem) {
        var elemName = elem.tagName.toLowerCase();
        if (elem.id) {
            elemName += '#'+elem.id;
        }
        if (elem.className) {
            elemName += '.'+elem.className.split(' ').join('.');
        }
        return elemName;
    }
</script>
</body>
</html>
